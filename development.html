<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Professional development, training, and academic engagements of Subhadip Jana."
    />
    <title>Professional Development - Subhadip Jana</title>

    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

    <!-- Theme initialization (runs before body renders to prevent flash) -->
    <script>
      (function() {
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      })();
    </script>

    <style>
      /* This new rule hides the content sections by default */
      .content-section {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Main Navigation Bar -->
    <nav>
      <div class="nav-container">
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
          <i class="fa-solid fa-sun"></i>
          <i class="fa-solid fa-moon"></i>
        </button>
        
        <!-- Modern Icon-based Navigation -->
        <div class="modern-nav-wrapper">
          <div class="modern-nav-links">
            <a href="index.html" class="nav-item">
              <i class="fa-solid fa-house"></i>
              <span>Home</span>
            </a>
            <a href="index.html#about" class="nav-item">
              <i class="fa-solid fa-user"></i>
              <span>About</span>
            </a>
            <a href="index.html#skills" class="nav-item">
              <i class="fa-solid fa-code"></i>
              <span>Skills</span>
            </a>
            <a href="projects.html" class="nav-item">
              <i class="fa-solid fa-flask"></i>
              <span>Projects</span>
            </a>
            <a href="index.html#publications" class="nav-item">
              <i class="fa-solid fa-book"></i>
              <span>Publications</span>
            </a>
            <a href="index.html#experience" class="nav-item">
              <i class="fa-solid fa-briefcase"></i>
              <span>Experience</span>
            </a>
            <a href="index.html#scholarship" class="nav-item">
              <i class="fa-solid fa-award"></i>
              <span>Awards</span>
            </a>
            <a href="index.html#volunteering" class="nav-item">
              <i class="fa-solid fa-handshake-angle"></i>
              <span>Volunteering</span>
            </a>
            <a href="index.html#professional development" class="nav-item active">
              <i class="fa-solid fa-graduation-cap"></i>
              <span>Development</span>
            </a>
            <a href="blog.html" class="nav-item">
              <i class="fa-solid fa-pen-to-square"></i>
              <span>Blogs</span>
            </a>
            <a href="index.html#contact" class="nav-item nav-item-contact">
              <i class="fa-solid fa-envelope"></i>
              <span>Contact</span>
            </a>
          </div>
        </div>
        
        <i class="fa-solid fa-bars hamburg" onclick="hamburg()"></i>
      </div>
      
      <!-- Mobile Dropdown Menu -->
      <div class="dropdown">
        <div class="links">
          <a href="index.html">Home</a>
          <a href="index.html#about">About</a>
          <a href="index.html#skills">Skills</a>
          <a href="projects.html">Projects</a>
          <a href="index.html#publications">Publications</a>
          <a href="index.html#experience">Experience</a>
          <a href="index.html#scholarship">Scholarship & Awards</a>
          <a href="index.html#volunteering">Volunteering</a>
          <a href="index.html#professional development">Professional Development</a>
          <a href="blog.html">Blogs</a>
          <a href="index.html#contact">Get In Touch</a>
          <i class="fa-solid fa-xmark cancel" onclick="cancel()"></i>
        </div>
      </div>
    </nav>

    <main class="page-section">
      <div class="development-container">
        <div class="page-title-header">
          <a href="index.html#professional%20development" class="back-arrow-btn" aria-label="Back to Professional Development" title="Back to Professional Development">
            <i class="fa-solid fa-arrow-left"></i>
          </a>
          <h2 id="page-title" class="section-title">Loading...</h2>
        </div>

        <!-- Content Section 1: Certifications -->
        <div id="certifications" class="content-section">
          <!-- Content will be loaded dynamically -->
        </div>

        <!-- Content Section 2: Presentations -->
        <div id="presentations" class="content-section">
          <!-- Content will be loaded dynamically -->
        </div>

        <!-- Content Section 3: Webinars -->
        <div id="webinars" class="content-section">
          <!-- Content will be loaded dynamically -->
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-container">
        <div class="footer-socials">
          <a href="https://github.com/SubhadipJana1409" target="_blank" aria-label="GitHub" class="github-icon"><i class="fa-brands fa-github"></i></a>
          <a href="https://facebook.com/SubhadipJana1409" target="_blank" aria-label="Facebook" class="facebook-icon"><i class="fa-brands fa-facebook"></i></a>
          <a href="https://linkedin.com/in/subhadip-jana1409" target="_blank" aria-label="LinkedIn" class="linkedin-icon"><i class="fa-brands fa-linkedin"></i></a>
          <a href="https://orcid.org/0009-0003-7860-2853" target="_blank" aria-label="ORCID" class="orcid-icon"><i class="fa-brands fa-orcid"></i></a>
          <a href="https://x.com/Subhadip1409" target="_blank" aria-label="Twitter" class="x-icon"><i class="fa-brands fa-x-twitter"></i></a>
        </div>

        <div class="footer-nav">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#about">About</a></li>
            <li><a href="index.html#skills">Skills</a></li>
            <li><a href="index.html#projects">Projects</a></li>
            <li><a href="index.html#publications">Publications</a></li>
            <li><a href="index.html#experience">Experience</a></li>
            <li><a href="index.html#scholarship">Scholarship & Awards</a></li>
            <li><a href="index.html#volunteering">Volunteering</a></li>
            <li><a href="index.html#professional development">Professional Development</a></li>
            <li><a href="index.html#blogs">Blogs</a></li>
            <li><a href="index.html#contact">Contact</a></li>
          </ul>
        </div>

        <div class="footer-bottom">
          <p>Copyright © 2025 by Subhadip Jana | All Rights Reserved.</p>
        </div>
        <div class="footer-icon-top">
          <a href="#">
            <i class="fa-solid fa-angle-up"></i>
            <p>Back to Top</p>
          </a>
        </div>
      </div>
    </footer>

    <!-- Dynamic Professional Development Content -->
    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@sanity/client/+esm";

      // Fetches certifications
      async function fetchCertifications(client) {
        try {
          const query = `*[_type == "certification"] | order(order desc){ _id, title, organization, keySkills, certificateLink, completionDate, order }`;
          return await client.fetch(query);
        } catch (error) {
          console.error("Certifications fetch failed:", error);
          return [];
        }
      }

      // Fetches presentations
      async function fetchPresentations(client) {
        try {
          const query = `*[_type == "presentation"] | order(order desc){ _id, title, type, event, description, detailsLink, date, order }`;
          return await client.fetch(query);
        } catch (error) {
          console.error("Presentations fetch failed:", error);
          return [];
        }
      }

      // Fetches webinars
      async function fetchWebinars(client) {
        try {
          const query = `*[_type == "webinar"] | order(order desc){ _id, title, host, topic, link, date, order }`;
          return await client.fetch(query);
        } catch (error) {
          console.error("Webinars fetch failed:", error);
          return [];
        }
      }

      function renderCertifications(certifications) {
        const container = document.getElementById("certifications");
        if (!container) return;

        if (certifications.length === 0) {
          container.innerHTML = "<p>No certifications added yet.</p>";
          return;
        }

        let html = '<ul class="e-learning-list">';
        certifications.forEach((cert) => {
          const certificateLink = cert.certificateLink
            ? `<a href="${cert.certificateLink}" target="_blank" class="certificate-link">View Certificate <i class="fa-solid fa-arrow-up-right-from-square"></i></a>`
            : "Certificate not available";
          html += `
            <li class="e-learning-item">
              <div class="e-learning-header">
                <h4>${cert.title}</h4>
                ${certificateLink}
              </div>
              <p class="e-learning-meta">${cert.organization}</p>
              <p class="e-learning-skills"><strong>Key Skills:</strong> ${cert.keySkills}</p>
            </li>`;
        });
        html += "</ul>";

        container.innerHTML = html;
      }

      function renderPresentations(presentations) {
        const container = document.getElementById("presentations");
        if (!container) return;

        if (presentations.length === 0) {
          container.innerHTML = "<p>No presentations added yet.</p>";
          return;
        }

        let html = '<div class="presentation-grid">';
        presentations.forEach((pres) => {
          const detailsLink = pres.detailsLink
            ? `<a href="${pres.detailsLink}" target="_blank" class="details-btn">View Details</a>`
            : "";
          html += `
            <div class="presentation-card">
              <h4>${pres.title}</h4>
              <p class="presentation-meta">
                <span class="p-type">${pres.type}</span> |
                <span class="p-event">${pres.event}</span>
              </p>
              <p class="presentation-desc">${pres.description}</p>
              ${detailsLink}
            </div>`;
        });
        html += "</div>";

        container.innerHTML = html;
      }

      function renderWebinars(webinars) {
        const container = document.getElementById("webinars");
        if (!container) return;

        if (webinars.length === 0) {
          container.innerHTML = "<p>No webinars added yet.</p>";
          return;
        }

        let html = '<ul class="webinar-list">';
        webinars.forEach((web) => {
          const titleLink = web.link
            ? `<a href="${web.link}" target="_blank">"${web.title}"</a>`
            : `"${web.title}"`;
          const hostInfo = web.host ? ` – Hosted by ${web.host}` : "";
          html += `<li class="webinar-item">${titleLink}${hostInfo}</li>`;
        });
        html += "</ul>";

        container.innerHTML = html;
      }

      document.addEventListener("DOMContentLoaded", async function () {
        // Get the URL parameter
        const params = new URLSearchParams(window.location.search);
        const sectionToShow = params.get("section");

        // Define titles for each section
        const titles = {
          certifications: "Certifications & Specialized Training",
          presentations: "Presentations & Academic Engagements",
          webinars: "Webinars & Continuing Education",
        };

        const pageTitleElement = document.getElementById("page-title");

        // Create Sanity client
        const sanityClient = createClient({
          projectId: "18tiebeg",
          dataset: "production",
          useCdn: true,
          apiVersion: "2024-06-19",
        });

        try {
          if (sectionToShow && titles[sectionToShow]) {
            // Show a specific section
            pageTitleElement.textContent = titles[sectionToShow];

            let data = [];
            if (sectionToShow === "certifications") {
              data = await fetchCertifications(sanityClient);
              renderCertifications(data);
            } else if (sectionToShow === "presentations") {
              data = await fetchPresentations(sanityClient);
              renderPresentations(data);
            } else if (sectionToShow === "webinars") {
              data = await fetchWebinars(sanityClient);
              renderWebinars(data);
            }

            // Show the section
            const targetElement = document.getElementById(sectionToShow);
            if (targetElement) {
              targetElement.style.display = "block";
            }
          } else {
            // No section param or invalid — show ALL sections
            pageTitleElement.textContent = "Professional Development";

            const [certs, pres, webs] = await Promise.all([
              fetchCertifications(sanityClient),
              fetchPresentations(sanityClient),
              fetchWebinars(sanityClient),
            ]);

            // Add sub-headings and render each section
            const certContainer = document.getElementById("certifications");
            const presContainer = document.getElementById("presentations");
            const webContainer = document.getElementById("webinars");

            if (certContainer) {
              renderCertifications(certs);
              certContainer.insertAdjacentHTML("afterbegin", `<h3 class="subsection-title">${titles.certifications}</h3>`);
              certContainer.style.display = "block";
            }
            if (presContainer) {
              renderPresentations(pres);
              presContainer.insertAdjacentHTML("afterbegin", `<h3 class="subsection-title">${titles.presentations}</h3>`);
              presContainer.style.display = "block";
            }
            if (webContainer) {
              renderWebinars(webs);
              webContainer.insertAdjacentHTML("afterbegin", `<h3 class="subsection-title">${titles.webinars}</h3>`);
              webContainer.style.display = "block";
            }
          }
        } catch (error) {
          console.error("Error loading content:", error);
          pageTitleElement.textContent = "Error Loading Content";
          pageTitleElement.style.color = "red";
        }
      });
    </script>
    
    <!-- Theme Toggle & Mobile Menu Script -->
    <script>
      // Mobile Menu toggle
      window.hamburg = () => {
        document.querySelector(".dropdown").style.transform = "translateY(0)";
      };
      window.cancel = () => {
        document.querySelector(".dropdown").style.transform = "translateY(-110%)";
      };

      document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            if (newTheme === 'dark') {
              htmlElement.setAttribute('data-theme', 'dark');
            } else {
              htmlElement.removeAttribute('data-theme');
            }
            localStorage.setItem('theme', newTheme);
          });
        }
      });
    </script>
  </body>
</html>
